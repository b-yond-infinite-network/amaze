before_script:
  - export GRADLE_USER_HOME=`pwd`/.gradle

stages:
  - build
  - unit-tests

cache:
  paths:
    - .gradle/wrapper
    - .gradle/caches

build spring:
    stage: build
    image: gradle:jdk12
    script:
        - cd microservice/challenge-1/backend
        - gradle clean build -x test
        - ls -la build/libs/
    artifacts:
      paths:
        - build/libs/*.jar
      expire_in: 60 minutes

unit test:
    stage: unit-tests
    image: gradle:jdk12
    script:
        - gradle unitTest